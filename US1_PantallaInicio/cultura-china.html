<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cultura China - Cocinando Juntos</title>
    <link rel="stylesheet" href="styles-search-update.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="styles2.css">
    <script type="module" src="index.js"></script>
    <script type="module" src="../components.js"></script>
</head>

<body>
    <div id="navbar-container"></div>

    <main>
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a href="index.html">Inicio</a> >
            <span>Cultura China</span>
        </div>

        <!-- Título de la cultura -->
        <div class="culture-header">
            <h1>Cultura China</h1>
            <div class="culture-description">
                <p>Descubre los sabores auténticos de la cocina tradicional china</p>
            </div>
        </div>

        <!-- Filtros -->
        <div class="filters">
            <div class="filter-group">
                <button class="filter-button active" onclick="window.location.href='../Platos.html'">Mejor
                    Valoradas</button>
            </div>
            <div class="filter-group">
                <button class="filter-button" id="filter-btn">Filtros</button>
            </div>
        </div>

        <!-- Cuadro emergente de filtros -->
        <div id="filter-options" style="display: none;">
            <label for="filter-culture">Cultura:</label>
            <select id="filter-culture">
                <option value="">Todas</option>
                <option value="China">China</option>
                <option value="Española">Española</option>
                <option value="Italiana">Italiana</option>
                <option value="Francesa">Francesa</option>
                <option value="Japonesa">Japonesa</option>
                <option value="Venezolana">Venezolana</option>
            </select>

            <label for="filter-difficulty">Dificultad:</label>
            <select id="filter-difficulty">
                <option value="">Todas</option>
                <option value="Fácil">Fácil</option>
                <option value="Media">Media</option>
                <option value="Difícil">Difícil</option>
            </select>

            <label for="filter-time">Tiempo:</label>
            <select id="filter-time">
                <option value="">Cualquier tiempo</option>
                <option value="0-30">Menos de 30 min</option>
                <option value="30-60">30 - 60 min</option>
                <option value="60-120">60 - 120 min</option>
                <option value="121">Más de 120 min</option>
            </select>

            <button id="apply-filters">Aplicar Filtros</button>
        </div>

        <!-- Grid de recetas -->
        <div class="recipes-grid">
            <div class="recipe-card" data-culture="China" data-time="45" data-difficulty="Media">
                <div class="recipe-image">
                    <a href="./../US6_GuardarRecetas/pollo-agridulce.html"><img
                            src="./Imagenes/China/pollo-agridulce.jpg" alt="Pollo Agridulce"></a>
                </div>
                <h3>Pollo Agridulce</h3>
                <div class="recipe-meta">
                    <span class="difficulty">Media</span>
                    <span class="time">45 min</span>
                    <span class="category">Comida</span>
                </div>
            </div>

            <div class="recipe-card" data-culture="China" data-time="45" data-difficulty="Fácil">
                <div class="recipe-image">
                    <a href="./../US6_GuardarRecetas/galleta-de-sesamo.html"><img
                            src="./Imagenes/China/galletas-de-sesamo.jpg" alt="Galletas de Sésamo"></a>
                </div>
                <h3>Galletas de Sésamo</h3>
                <div class="recipe-meta">
                    <span class="difficulty">Fácil</span>
                    <span class="time">45 min</span>
                    <span class="category">Merienda</span>
                </div>
            </div>

            <div class="recipe-card" data-culture="China" data-time="90" data-difficulty="Media">
                <div class="recipe-image">
                    <a href="./../US6_GuardarRecetas/bolitas-chinas.html"><img src="./Imagenes/China/bollitos-chinos.jpg" alt="Bolitas Chinas"></a>
                </div>
                <h3>Bollitos Chinos</h3>
                <div class="recipe-meta">
                    <span class="difficulty">Media</span>
                    <span class="time">1.30h</span>
                    <span class="category">Desayuno</span>
                </div>
            </div>

            <div class="recipe-card" data-culture="China" data-time="40" data-difficulty="Fácil">
                <div class="recipe-image">
                    <a href="./../US6_GuardarRecetas/fideos-salteados.html"><img
                            src="./Imagenes/China/fideos-salteados.jpg" alt="Fideos Salteados"></a>
                </div>
                <h3>Fideos Salteados</h3>
                <div class="recipe-meta">
                    <span class="difficulty">Fácil</span>
                    <span class="time">40 min</span>
                    <span class="category">Cena</span>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->

    <script>
        // Obtener el usuario desde localStorage
        const usuario = JSON.parse(localStorage.getItem("usuario"));
        const userInfo = document.getElementById("user-info");
        const authButton = document.getElementById("auth-button");

        if (usuario) {
            userInfo.style.display = "flex";
            document.getElementById("user-name").textContent = usuario.username;
            authButton.style.display = "none";

            document.getElementById("logout-btn").addEventListener("click", (e) => {
                e.preventDefault();
                localStorage.removeItem("usuario");
                window.location.reload();
            });
        } else {
            userInfo.style.display = "none";
            authButton.style.display = "block";
        }

        // Código JavaScript directamente en el HTML para asegurar el orden correcto
        document.addEventListener('DOMContentLoaded', () => {
                // Menú desplegable
                document.getElementById('menuToggle').addEventListener('click', function (e) {
                    e.preventDefault();
                    const overlayMenu = document.getElementById('overlayMenu');
                    overlayMenu.classList.toggle('active');
                });

                document.getElementById('closeMenu').addEventListener('click', function () {
                    const overlayMenu = document.getElementById('overlayMenu');
                    overlayMenu.classList.remove('active');
                });

                // Cerrar al hacer clic fuera del menú
                document.getElementById('overlayMenu').addEventListener('click', function (e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });

        // Script para los filtros
        document.addEventListener("DOMContentLoaded", () => {
            const filterBtn = document.getElementById("filter-btn");
            const filterOptions = document.getElementById("filter-options");
            const applyFiltersBtn = document.getElementById("apply-filters");

            filterBtn.addEventListener("click", () => {
                filterOptions.style.display = filterOptions.style.display === "none" ? "block" : "none";
            });

            applyFiltersBtn.addEventListener("click", () => {
                const selectedCulture = document.getElementById("filter-culture").value;
                const selectedDifficulty = document.getElementById("filter-difficulty").value;
                const selectedTime = document.getElementById("filter-time").value;

                const recipes = document.querySelectorAll(".recipe-card");

                recipes.forEach(recipe => {
                    const recipeCulture = recipe.getAttribute("data-culture");
                    const recipeTime = parseInt(recipe.getAttribute("data-time"));
                    const recipeDifficulty = recipe.getAttribute("data-difficulty");

                    const matchesCulture = !selectedCulture || selectedCulture === recipeCulture;
                    const matchesDifficulty = !selectedDifficulty || selectedDifficulty === recipeDifficulty;
                    let matchesTime = false;

                    if (selectedTime === "" ||
                        (selectedTime === "0-30" && recipeTime <= 30) ||
                        (selectedTime === "30-60" && recipeTime > 30 && recipeTime <= 60) ||
                        (selectedTime === "60-120" && recipeTime > 60 && recipeTime <= 120) ||
                        (selectedTime === "121" && recipeTime > 120)) {
                        matchesTime = true;
                    }

                    if (matchesCulture && matchesDifficulty && matchesTime) {
                        recipe.style.display = "inline-block";
                    } else {
                        recipe.style.display = "none";
                    }
                });

                filterOptions.style.display = "none";
            });

            document.addEventListener("click", (event) => {
                if (!filterOptions.contains(event.target) && event.target !== filterBtn) {
                    filterOptions.style.display = "none";
                }
            });
        });
    </script>
    <script src="index.js"></script>
</body>

</html>